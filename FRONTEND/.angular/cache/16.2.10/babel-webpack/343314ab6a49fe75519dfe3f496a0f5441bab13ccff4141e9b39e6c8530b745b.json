{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Action, Selector, State } from '@ngxs/store';\nimport { AddProduit, DelProduit } from '../actions/panier-action';\nimport * as i0 from \"@angular/core\";\nexport let PanierState = class PanierState {\n  static getNbProduits(state) {\n    return state.panier.length;\n  }\n  static getListeProduits(state) {\n    return state.panier;\n  }\n  add({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    patchState({\n      panier: [...state.panier, payload]\n    });\n  }\n  del({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    patchState({\n      panier: state.panier.filter(x => !(payload.ref == x.ref))\n    });\n  }\n  static #_ = this.ɵfac = function PanierState_Factory(t) {\n    return new (t || PanierState)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PanierState,\n    factory: PanierState.ɵfac\n  });\n};\n__decorate([Action(AddProduit)], PanierState.prototype, \"add\", null);\n__decorate([Action(DelProduit)], PanierState.prototype, \"del\", null);\n__decorate([Selector()], PanierState, \"getNbProduits\", null);\n__decorate([Selector()], PanierState, \"getListeProduits\", null);\nPanierState = __decorate([State({\n  name: 'panier',\n  defaults: {\n    panier: []\n  }\n})], PanierState);","map":{"version":3,"names":["Action","Selector","State","AddProduit","DelProduit","PanierState","getNbProduits","state","panier","length","getListeProduits","add","getState","patchState","payload","del","filter","x","ref","_","_2","factory","ɵfac","__decorate","name","defaults"],"sources":["/Users/robinbechlem/Desktop/CNAM 1A/SI-WEB/tp05_bechlem_robin/src/shared/states/panier-state.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\r\nimport { AddProduit, DelProduit } from '../actions/panier-action';\r\nimport { PanierStateModel } from './panier-state-model';\r\nimport { Produit } from '../models/produit';\r\n@State<PanierStateModel>({\r\n  name: 'panier',\r\n  defaults: {\r\n    panier: [],\r\n  },\r\n})\r\n@Injectable()\r\nexport class PanierState {\r\n  @Selector()\r\n  static getNbProduits(state: PanierStateModel) {\r\n    return state.panier.length;\r\n  }\r\n\r\n  @Selector()\r\n  static getListeProduits(state: PanierStateModel) {\r\n    return state.panier;\r\n  }\r\n\r\n  @Action(AddProduit)\r\n  add(\r\n    { getState, patchState }: StateContext<PanierStateModel>,\r\n    { payload }: AddProduit\r\n  ) {\r\n    const state = getState();\r\n    patchState({\r\n      panier: [...state.panier, payload],\r\n    });\r\n  }\r\n\r\n  @Action(DelProduit)\r\n  del(\r\n    { getState, patchState }: StateContext<PanierStateModel>,\r\n    { payload }: DelProduit\r\n  ) {\r\n    const state = getState();\r\n    patchState({\r\n      panier: state.panier.filter((x) => !(payload.ref == x.ref)),\r\n    });\r\n  }\r\n}\r\n"],"mappings":";AACA,SAASA,MAAM,EAAEC,QAAQ,EAAEC,KAAK,QAAsB,aAAa;AACnE,SAASC,UAAU,EAAEC,UAAU,QAAQ,0BAA0B;;AAU1D,WAAMC,WAAW,GAAjB,MAAMA,WAAW;EAEf,OAAAC,aAAaA,CAACC,KAAuB;IAC1C,OAAOA,KAAK,CAACC,MAAM,CAACC,MAAM;EAC5B;EAGO,OAAAC,gBAAgBA,CAACH,KAAuB;IAC7C,OAAOA,KAAK,CAACC,MAAM;EACrB;EAGAG,GAAGA,CACD;IAAEC,QAAQ;IAAEC;EAAU,CAAkC,EACxD;IAAEC;EAAO,CAAc;IAEvB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBC,UAAU,CAAC;MACTL,MAAM,EAAE,CAAC,GAAGD,KAAK,CAACC,MAAM,EAAEM,OAAO;KAClC,CAAC;EACJ;EAGAC,GAAGA,CACD;IAAEH,QAAQ;IAAEC;EAAU,CAAkC,EACxD;IAAEC;EAAO,CAAc;IAEvB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBC,UAAU,CAAC;MACTL,MAAM,EAAED,KAAK,CAACC,MAAM,CAACQ,MAAM,CAAEC,CAAC,IAAK,EAAEH,OAAO,CAACI,GAAG,IAAID,CAAC,CAACC,GAAG,CAAC;KAC3D,CAAC;EACJ;EAAC,QAAAC,CAAA,G;qBA/BUd,WAAW;EAAA;EAAA,QAAAe,EAAA,G;WAAXf,WAAW;IAAAgB,OAAA,EAAXhB,WAAW,CAAAiB;EAAA;;AAYtBC,UAAA,EADCvB,MAAM,CAACG,UAAU,CAAC,C,qCASlB;AAGDoB,UAAA,EADCvB,MAAM,CAACI,UAAU,CAAC,C,qCASlB;AA7BMmB,UAAA,EADNtB,QAAQ,EAAE,C,qCAGV;AAGMsB,UAAA,EADNtB,QAAQ,EAAE,C,wCAGV;AATUI,WAAW,GAAAkB,UAAA,EAPvBrB,KAAK,CAAmB;EACvBsB,IAAI,EAAE,QAAQ;EACdC,QAAQ,EAAE;IACRjB,MAAM,EAAE;;CAEX,CAAC,C,EAEWH,WAAW,CAgCvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}
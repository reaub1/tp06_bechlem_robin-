{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Action, Selector, State } from '@ngxs/store';\nimport { AddProduit, DelProduit } from '../actions/panier-action';\nimport * as i0 from \"@angular/core\";\nexport let PanierState = class PanierState {\n  static getNbProduits(state) {\n    return state.panier?.length;\n  }\n  static getListeProduits(state) {\n    return state.panier;\n  }\n  add({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    const updatedPanier = state.panier ? [...state.panier, payload] : [payload];\n    patchState({\n      panier: updatedPanier\n    });\n  }\n  del({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    patchState({\n      panier: state.panier?.filter(x => !(payload.ref == x.ref))\n    });\n  }\n  static #_ = this.ɵfac = function PanierState_Factory(t) {\n    return new (t || PanierState)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PanierState,\n    factory: PanierState.ɵfac\n  });\n};\n__decorate([Action(AddProduit)], PanierState.prototype, \"add\", null);\n__decorate([Action(DelProduit)], PanierState.prototype, \"del\", null);\n__decorate([Selector()], PanierState, \"getNbProduits\", null);\n__decorate([Selector()], PanierState, \"getListeProduits\", null);\nPanierState = __decorate([State({\n  name: 'panier',\n  defaults: {\n    panier: []\n  }\n})], PanierState);","map":{"version":3,"names":["Action","Selector","State","AddProduit","DelProduit","PanierState","getNbProduits","state","panier","length","getListeProduits","add","getState","patchState","payload","updatedPanier","del","filter","x","ref","_","_2","factory","ɵfac","__decorate","name","defaults"],"sources":["/Users/robinbechlem/Desktop/CNAM 1A/SI-WEB/tp05_bechlem_robin/FRONTEND/src/shared/states/panier-state.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\r\nimport { AddProduit, DelProduit } from '../actions/panier-action';\r\nimport { PanierStateModel } from './panier-state-model';\r\nimport { Produit } from '../models/produit';\r\n@State<PanierStateModel>({\r\n  name: 'panier',\r\n  defaults: {\r\n    panier: [],\r\n  },\r\n})\r\n@Injectable()\r\nexport class PanierState {\r\n  @Selector()\r\n  static getNbProduits(state: PanierStateModel) {\r\n    return state.panier?.length;\r\n  }\r\n\r\n  @Selector()\r\n  static getListeProduits(state: PanierStateModel) {\r\n    return state.panier;\r\n  }\r\n\r\n  @Action(AddProduit)\r\n  add(\r\n    { getState, patchState }: StateContext<PanierStateModel>,\r\n    { payload }: AddProduit\r\n  ) {\r\n    const state = getState();\r\n    const updatedPanier = state.panier ? [...state.panier, payload] : [payload];\r\n    patchState({\r\n      panier: updatedPanier,\r\n    });\r\n  }\r\n\r\n  @Action(DelProduit)\r\n  del(\r\n    { getState, patchState }: StateContext<PanierStateModel>,\r\n    { payload }: DelProduit\r\n  ) {\r\n    const state = getState();\r\n    patchState({\r\n      panier: state.panier?.filter((x) => !(payload.ref == x.ref)),\r\n    });\r\n  }\r\n}\r\n"],"mappings":";AACA,SAASA,MAAM,EAAEC,QAAQ,EAAEC,KAAK,QAAsB,aAAa;AACnE,SAASC,UAAU,EAAEC,UAAU,QAAQ,0BAA0B;;AAU1D,WAAMC,WAAW,GAAjB,MAAMA,WAAW;EAEf,OAAAC,aAAaA,CAACC,KAAuB;IAC1C,OAAOA,KAAK,CAACC,MAAM,EAAEC,MAAM;EAC7B;EAGO,OAAAC,gBAAgBA,CAACH,KAAuB;IAC7C,OAAOA,KAAK,CAACC,MAAM;EACrB;EAGAG,GAAGA,CACD;IAAEC,QAAQ;IAAEC;EAAU,CAAkC,EACxD;IAAEC;EAAO,CAAc;IAEvB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxB,MAAMG,aAAa,GAAGR,KAAK,CAACC,MAAM,GAAG,CAAC,GAAGD,KAAK,CAACC,MAAM,EAAEM,OAAO,CAAC,GAAG,CAACA,OAAO,CAAC;IAC3ED,UAAU,CAAC;MACTL,MAAM,EAAEO;KACT,CAAC;EACJ;EAGAC,GAAGA,CACD;IAAEJ,QAAQ;IAAEC;EAAU,CAAkC,EACxD;IAAEC;EAAO,CAAc;IAEvB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBC,UAAU,CAAC;MACTL,MAAM,EAAED,KAAK,CAACC,MAAM,EAAES,MAAM,CAAEC,CAAC,IAAK,EAAEJ,OAAO,CAACK,GAAG,IAAID,CAAC,CAACC,GAAG,CAAC;KAC5D,CAAC;EACJ;EAAC,QAAAC,CAAA,G;qBAhCUf,WAAW;EAAA;EAAA,QAAAgB,EAAA,G;WAAXhB,WAAW;IAAAiB,OAAA,EAAXjB,WAAW,CAAAkB;EAAA;;AAYtBC,UAAA,EADCxB,MAAM,CAACG,UAAU,CAAC,C,qCAUlB;AAGDqB,UAAA,EADCxB,MAAM,CAACI,UAAU,CAAC,C,qCASlB;AA9BMoB,UAAA,EADNvB,QAAQ,EAAE,C,qCAGV;AAGMuB,UAAA,EADNvB,QAAQ,EAAE,C,wCAGV;AATUI,WAAW,GAAAmB,UAAA,EAPvBtB,KAAK,CAAmB;EACvBuB,IAAI,EAAE,QAAQ;EACdC,QAAQ,EAAE;IACRlB,MAAM,EAAE;;CAEX,CAAC,C,EAEWH,WAAW,CAiCvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}